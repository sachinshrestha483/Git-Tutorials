utility function for version 2 and 3bvbhb